"use strict";(self.webpackChunkfoodprojct=self.webpackChunkfoodprojct||[]).push([[266],{1266:(L,m,r)=>{r.r(m),r.d(m,{ResipesModule:()=>V});var d=r(6814),g=r(4581),e=r(5879),u=r(4857),Z=r(7700),h=r(2425),_=r(7862),a=r(6223),b=r(1216);function T(i,s){if(1&i&&(e.TgZ(0,"option",21),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function v(i,s){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function A(i,s){if(1&i&&(e.ynx(0),e.YNc(1,v,2,1,"span",22),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.category)}}function x(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1," No Category"),e.qZA())}const U=function(i){return["/dashboard/admin/recipes/view/",i]},y=function(i){return["/dashboard/admin/resipes/edit/",i]};function C(i,s){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",23),e._UZ(4,"img",24),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e.YNc(12,A,2,1,"ng-container",17),e.YNc(13,x,2,0,"span",17),e.qZA(),e.TgZ(14,"td")(15,"div",25)(16,"a",26),e._UZ(17,"i",27),e.qZA(),e.TgZ(18,"ul",28)(19,"li")(20,"a",29)(21,"span"),e._UZ(22,"i",30),e.qZA(),e.TgZ(23,"span",31),e._uU(24,"View"),e.qZA()()(),e.TgZ(25,"li")(26,"a",29)(27,"span"),e._UZ(28,"i",32),e.qZA(),e.TgZ(29,"span",31),e._uU(30,"Edit"),e.qZA()()(),e.TgZ(31,"li")(32,"a",33)(33,"span"),e._UZ(34,"i",34),e.qZA(),e.TgZ(35,"span",31),e._uU(36,"Delete"),e.qZA()()()()()()()),2&i){const t=s.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Q6J("src","https://upskilling-egypt.com:3006/"+t.imagePath,e.LSH),e.xp6(2),e.Oqu(t.price),e.xp6(2),e.Oqu(t.description),e.xp6(2),e.Oqu(t.tag.name),e.xp6(2),e.Q6J("ngIf",t.category.length>0),e.xp6(1),e.Q6J("ngIf",0==t.category.length),e.xp6(7),e.Q6J("routerLink",e.VKq(9,U,t.id)),e.xp6(6),e.Q6J("routerLink",e.VKq(11,y,t.id))}}function I(i,s){if(1&i&&(e.TgZ(0,"tbody"),e.YNc(1,C,37,13,"tr",22),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.tableData)}}const q=function(){return[5,10,25]};let w=(()=>{class i{constructor(t,o,n,p){this._RecipeService=t,this.dialog=o,this._ToastrService=n,this._HelperService=p,this.searchValue="",this.pageNumber=1,this.pageSize=5,this.tableData=[],this.tags=[]}ngOnInit(){this.getTableData(),this.getAllTags()}getTableData(){this._RecipeService.getRecipe({pageSize:this.pageSize,pageNumber:this.pageNumber,name:this.searchValue,tagId:this.tagId}).subscribe({next:o=>{console.log(o),this.tableResponse=o,this.tableData=this.tableResponse?.data,console.log(this.tableData)},error:()=>{},complete:()=>{let o=this.tableResponse?.totalNumberOfRecords;void 0!==o?localStorage.setItem("categories",o.toLocaleString()):localStorage.setItem("categories","0")}})}getAllTags(){this._HelperService.getTags().subscribe({next:t=>{console.log(t),this.tags=t}})}handlePageEvent(t){console.log(t),this.pageNumber=t.pageIndex,this.pageSize=t.pageSize,this.getTableData()}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(u.j),e.Y36(Z.uw),e.Y36(h._W),e.Y36(_.W))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-resipes"]],decls:50,vars:9,consts:[[1,"header-page","my-3"],[1,"container"],[1,"row"],[1,"col-md-9","d-flex","align-items-center"],[1,"px-5"],[1,"col-md-3"],["src","../../../assets/images/menu-avatar.svg","alt","",1,"w-75","mb-0"],[1,"table-header","mt-5"],[1,"col-md-8"],["type","text","placeholder","Search Here And Press Enter ",1,"form-control","rounded","shadow-sm",3,"ngModel","ngModelChange","keyup"],[1,"col-md-2"],["aria-label","Default select example",1,"form-select","shadow-sm",3,"ngModel","ngModelChange","change"],["selected",""],[3,"value",4,"ngFor","ngForOf"],["routerLink","/dashboard/admin/resipes/add",1,"btn","btn-success","shadow-sm"],[1,"py-4"],[1,"table","table-striped","text-center"],[4,"ngIf"],[1,"w-50","mx-auto","mt-5"],["aria-label","Select page",1,"demo-paginator","w-75","mx-auto",3,"length","pageSize","pageSizeOptions","pageIndex","page"],["paginator",""],[3,"value"],[4,"ngFor","ngForOf"],[1,"w-25"],["alt","",1,"w-25",3,"src"],[1,"dropdown"],["href","#","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"dropdown-toggle","text-muted"],[1,"fa-solid","fa-ellipsis","fa-lg","text-main"],[1,"dropdown-menu"],[1,"dropdown-item",3,"routerLink"],[1,"fa-regular","fa-eye","text-main"],[1,"p-2"],[1,"fa-regular","fa-pen-to-square","text-main"],[1,"dropdown-item"],[1,"fa-solid","fa-trash-can","text-danger"]],template:function(o,n){1&o&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2"),e._uU(6,"Recipes "),e.TgZ(7,"span"),e._uU(8,"Items!"),e.qZA()(),e.TgZ(9,"p"),e._uU(10," You can now add your items that any user can order it from the Application and you can edit "),e.qZA()()(),e.TgZ(11,"div",5)(12,"div"),e._UZ(13,"img",6),e.qZA()()()()(),e.TgZ(14,"section",7)(15,"div",1)(16,"div",2)(17,"div",8)(18,"input",9),e.NdJ("ngModelChange",function(l){return n.searchValue=l})("keyup",function(){return n.getTableData()}),e.qZA()(),e.TgZ(19,"div",10)(20,"select",11),e.NdJ("ngModelChange",function(l){return n.tagId=l})("change",function(){return n.getTableData()}),e.TgZ(21,"option",12),e._uU(22,"All"),e.qZA(),e.YNc(23,T,2,2,"option",13),e.qZA()(),e.TgZ(24,"div",10)(25,"button",14),e._uU(26,"Add New Recipes"),e.qZA()()()()(),e.TgZ(27,"section",15)(28,"div",1)(29,"table",16)(30,"thead")(31,"tr")(32,"th"),e._uU(33,"Name"),e.qZA(),e.TgZ(34,"th"),e._uU(35,"Image"),e.qZA(),e.TgZ(36,"th"),e._uU(37,"Price"),e.qZA(),e.TgZ(38,"th"),e._uU(39,"Description"),e.qZA(),e.TgZ(40,"th"),e._uU(41,"Tag"),e.qZA(),e.TgZ(42,"th"),e._uU(43,"Category"),e.qZA(),e.TgZ(44,"th"),e._uU(45,"Actions"),e.qZA()()(),e.YNc(46,I,2,1,"tbody",17),e.qZA(),e.TgZ(47,"div",18)(48,"mat-paginator",19,20),e.NdJ("page",function(l){return n.handlePageEvent(l)}),e.qZA()()()()),2&o&&(e.xp6(18),e.Q6J("ngModel",n.searchValue),e.xp6(2),e.Q6J("ngModel",n.tagId),e.xp6(3),e.Q6J("ngForOf",n.tags),e.xp6(23),e.Q6J("ngIf",n.tableData.length>0),e.xp6(2),e.Q6J("length",null==n.tableResponse?null:n.tableResponse.totalNumberOfRecords)("pageSize",null==n.tableResponse?null:n.tableResponse.pageSize)("pageSizeOptions",e.DdM(8,q))("pageIndex",null==n.tableResponse?null:n.tableResponse.pageNumber))},dependencies:[d.sg,d.O5,g.rH,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.On,b.NW],styles:[".dropdown-toggle[_ngcontent-%COMP%]:after{display:none}"]})}return i})();var N=r(3843),c=r(4426);function S(i,s){1&i&&(e.TgZ(0,"h2"),e._uU(1,"View "),e.TgZ(2,"span",32),e._uU(3,"the Recipe !"),e.qZA()())}function R(i,s){1&i&&(e.TgZ(0,"h2"),e._uU(1,"Edit "),e.TgZ(2,"span",32),e._uU(3,"the Recipe !"),e.qZA()())}function J(i,s){1&i&&(e.TgZ(0,"h2"),e._uU(1,"Fill "),e.TgZ(2,"span",32),e._uU(3,"the Recipe !"),e.qZA()())}function F(i,s){if(1&i&&(e.TgZ(0,"option",33),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("ngValue",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function z(i,s){if(1&i&&(e.TgZ(0,"option",33),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("ngValue",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function D(i,s){1&i&&(e.TgZ(0,"ngx-dropzone-label"),e._UZ(1,"i",34),e.TgZ(2,"div"),e._uU(3," Drag & Drop or "),e.TgZ(4,"span",32),e._uU(5," Choose a Item Image to Upload "),e.qZA()()())}function Q(i,s){if(1&i&&(e.TgZ(0,"ngx-dropzone-label"),e._UZ(1,"img",35),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("src",t.imgSrc,e.LSH)}}function Y(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"ngx-dropzone-image-preview",36),e.NdJ("removed",function(){const p=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.onRemove(p))}),e.qZA()}if(2&i){const t=s.$implicit;e.Q6J("removable",!0)("file",t)}}function O(i,s){1&i&&(e.TgZ(0,"button",37),e._uU(1,"Save"),e.qZA())}const E=function(){return["/dashboard/admin/resipes"]};let f=(()=>{class i{constructor(t,o,n,p,l){this._helperService=t,this.toastr=o,this._recipeService=n,this._router=p,this._activatedRoute=l,this.tags=[],this.categories=[],this.recipeForm=new a.cw({name:new a.NI(null),description:new a.NI(null),price:new a.NI(null),tagId:new a.NI(null),categoriesIds:new a.NI(null)}),this.pathHttps="https://upskilling-egypt.com:3006/",this.isUpdatedPage=!1,this.isViewPage=!1,this.files=[],this.recipeId=l.snapshot.params.id,this.recipeId?(this.isUpdatedPage=!0,this.getRecipeById(this.recipeId),console.log(this.recipeId)):this.isUpdatedPage=!1,this._activatedRoute.url.subscribe(M=>{this.isViewPage=M.some(j=>"view"===j.path),console.log(this.isViewPage),this.disableFormControls()})}ngOnInit(){this.getAllTags(),this.getAllCategories()}onSubmit(t){console.log(t.value);let o=new FormData;o.append("name",t.value.name),o.append("price",t.value.price),o.append("description",t.value.description),o.append("categoriesIds",t.value.categoriesIds),o.append("tagId",t.value.tagId),o.append("recipeImage",this.imgSrc,this.imgSrc.name),this.recipeId?this.edit(this.recipeId,o):this.add(o)}add(t){this._recipeService.addRecipe(t).subscribe({next:o=>{console.log(o)},error:o=>{console.log(o.error.message),this.toastr.error(o.error.message,"error!")},complete:()=>{this.toastr.success(this.message,"Done!"),this._router.navigate(["/dashboard/admin/recipes"])}})}edit(t,o){this._recipeService.editRecipe(t,o).subscribe({next:n=>{console.log(n)},error:n=>{console.log(n.error.message),this.toastr.error(n.error.message,"error!")},complete:()=>{this.toastr.success(this.message,"Done!"),this._router.navigate(["/dashboard/admin/recipes"])}})}getAllTags(){this._helperService.getTags().subscribe({next:t=>{console.log(t),this.tags=t}})}getAllCategories(){this._helperService.getCategories().subscribe({next:t=>{console.log(t),this.categories=t.data}})}onSelect(t){console.log(t),this.imgSrc=t.addedFiles[0],this.files.push(...t.addedFiles)}onRemove(t){console.log(t),this.files.splice(this.files.indexOf(t),1)}getRecipeById(t){this._recipeService.getRecipeById(t).subscribe({next:o=>{console.log(o),this.recipeData=o},error:o=>{},complete:()=>{this.imgSrc=this.pathHttps+this.recipeData.imagePath,this.recipeForm.patchValue({name:this.recipeData?.name,price:this.recipeData?.price,description:this.recipeData?.description,tagId:this.recipeData?.tag.id,categoriesIds:this.recipeData?.category[0].id})}})}disableFormControls(){this.isViewPage&&(this.recipeForm.get("name")?.disable(),this.recipeForm.get("price")?.disable(),this.recipeForm.get("description")?.disable(),this.recipeForm.get("categoriesIds")?.disable(),this.recipeForm.get("tagId")?.disable(),this.recipeForm.get("recipeImage")?.disable())}static#e=this.\u0275fac=function(o){return new(o||i)(e.Y36(_.W),e.Y36(h._W),e.Y36(u.j),e.Y36(g.F0),e.Y36(g.gz))};static#t=this.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-edite"]],decls:60,vars:14,consts:[["id","recipes-header",1,"my-3"],[1,"container"],[1,"row"],[1,"col-md-9","d-flex","align-items-center"],[1,"px-5"],[4,"ngIf"],[1,"col-md-3","d-flex","align-items-center"],["type","submit",1,"primary",3,"routerLink"],[1,"fa-solid","fa-arrow-right","pl-2"],[1,"card-auth"],[3,"formGroup","ngSubmit"],[1,"col-md-8"],[1,"input-group","mb-3"],[1,"input-group-prepend"],["id","basic-addon1",1,"input-group-text","h-100"],[1,"fa-solid","fa-pen"],["formControlName","name","type","text","placeholder","Enter Recipe Name","aria-label","Name","aria-describedby","basic-addon1",1,"form-control"],[1,"col-md-4"],[1,"fa-solid","fa-money-check-dollar"],["formControlName","price","type","text","placeholder","Enter Price","aria-label","price","aria-describedby","basic-addon1",1,"form-control"],[1,"col-md-6"],["id","basic-addon1",1,"input-group-text","h-100","text-greyLight"],["formControlName","tagId","aria-label","Default select example",1,"form-select"],["selected",""],[3,"ngValue",4,"ngFor","ngForOf"],["formControlName","categoriesIds","aria-label","Default select example",1,"form-select"],["formControlName","description","id","exampleFormControlTextarea1","placeholder","Enter Description*","rows","3",1,"form-control"],[3,"multiple","disabled","change"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removable","file","removed",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end","gap-2","my-4"],["type","submit","class","primary px-4",4,"ngIf"],["type","button","routerLink","/dashboard/admin/resipes",1,"outline-primary"],[1,"text-main"],[3,"ngValue"],[1,"fa-solid","fa-upload","fa-3x","mb-3"],["alt","",1,"w-25",3,"src"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"removable","file","removed"],["type","submit",1,"primary","px-4"]],template:function(o,n){1&o&&(e.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e.YNc(5,S,4,0,"h2",5),e.YNc(6,R,4,0,"h2",5),e.YNc(7,J,4,0,"h2",5),e.TgZ(8,"p"),e._uU(9," you can now fill the meals easily using the table and form , click here and sill it with the table ! "),e.qZA()()(),e.TgZ(10,"div",6)(11,"div")(12,"button",7),e._uU(13," All Recipes "),e._UZ(14,"i",8),e.qZA()()()()()(),e.TgZ(15,"section",9)(16,"form",10),e.NdJ("ngSubmit",function(){return n.onSubmit(n.recipeForm)}),e.TgZ(17,"div",2)(18,"div",11)(19,"div",12)(20,"div",13)(21,"span",14),e._UZ(22,"i",15),e.qZA()(),e._UZ(23,"input",16),e.qZA()(),e.TgZ(24,"div",17)(25,"div",12)(26,"div",13)(27,"span",14),e._UZ(28,"i",18),e.qZA()(),e._UZ(29,"input",19),e.qZA()(),e.TgZ(30,"div",20)(31,"div",12)(32,"div",13)(33,"span",21),e._uU(34," Tags: "),e.qZA()(),e.TgZ(35,"select",22)(36,"option",23),e._uU(37,"All"),e.qZA(),e.YNc(38,F,2,2,"option",24),e.qZA()()(),e.TgZ(39,"div",20)(40,"div",12)(41,"div",13)(42,"span",21),e._uU(43," Categories: "),e.qZA()(),e.TgZ(44,"select",25)(45,"option",23),e._uU(46,"All"),e.qZA(),e.YNc(47,z,2,2,"option",24),e.qZA()()(),e.TgZ(48,"div",12),e._UZ(49,"div",13)(50,"textarea",26),e.qZA(),e.TgZ(51,"div")(52,"ngx-dropzone",27),e.NdJ("change",function(l){return n.onSelect(l)}),e.YNc(53,D,6,0,"ngx-dropzone-label",5),e.YNc(54,Q,2,1,"ngx-dropzone-label",5),e.YNc(55,Y,1,2,"ngx-dropzone-image-preview",28),e.qZA()(),e.TgZ(56,"div",29),e.YNc(57,O,2,0,"button",30),e.TgZ(58,"button",31),e._uU(59," Cancel "),e.qZA()()()()()),2&o&&(e.xp6(5),e.Q6J("ngIf",n.isViewPage),e.xp6(1),e.Q6J("ngIf",n.isUpdatedPage&&!n.isViewPage),e.xp6(1),e.Q6J("ngIf",!n.isUpdatedPage),e.xp6(5),e.Q6J("routerLink",e.DdM(13,E)),e.xp6(4),e.Q6J("formGroup",n.recipeForm),e.xp6(22),e.Q6J("ngForOf",n.tags),e.xp6(9),e.Q6J("ngForOf",n.categories),e.xp6(5),e.Q6J("multiple",!1)("disabled",n.isViewPage),e.xp6(1),e.Q6J("ngIf",!n.imgSrc),e.xp6(1),e.Q6J("ngIf",n.imgSrc),e.xp6(1),e.Q6J("ngForOf",n.files),e.xp6(2),e.Q6J("ngIf",!n.isViewPage))},dependencies:[d.sg,d.O5,g.rH,a._Y,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.sg,a.u,c._f,c.NP,c.sv]})}return i})();const P=[{path:"",component:w},{path:"add",component:f},{path:"edit/:id",component:f}];let V=(()=>{class i{static#e=this.\u0275fac=function(o){return new(o||i)};static#t=this.\u0275mod=e.oAB({type:i});static#i=this.\u0275inj=e.cJS({imports:[d.ez,g.Bz.forChild(P),N.m]})}return i})()}}]);